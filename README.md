# MapMaker - приложение для составления карт под DnD систему

MapMaker - это веб-приложение для создания и хранения карт под DnD-подобные системы. После короткой регистрации пользователь может сразу перейти к подготовке уровней для своей следующей партии!

Идейно о проекте можно посмотреть [здесь](https://github.com/Samyrai47/Map-maker-presentation).

## Части проекта:

- Frontend: https://github.com/Samyrai47/MapMaker (данный репозиторий)
- Backend: https://github.com/Samyrai47/MapMakerBackend

## Стек:

### Frontend:

- TypeScript - все приложение написано на нем
- React - функ. компоненты + хуки
- Redux Toolkit
- React Router - маршрутизация, соотвественно

### Backend:

- Java (21)
- Spring Boot 4.0
- PostgreSQL

Взаимодействие с API сделано по REST и покрывает все CRUD операции.

## "Бизнес-кейсы" (*куда жмать то?*)

### Сценарий 1 - Привествую, путник!

- Пользователь впервые заходит на сайт
- Попадает на страницу входа в аккаунт. Оттуда можно перейти на страницу регистрации
- Переходит на страницу регистрации. Вводит почту и пароль (дважды, чтобы наверняка).
- Попадает на страницу с картами пользователя. Т.к. пользователь новый, то карт нет.
- Нажимает кнопку New map. Открывается редактор карты. В качестве примера на карте набросан уровень.
- В нижней панели выбирает один из инструментов (описание инструментов ниже)
- В левом верхнем выпадающем меню экспортирует карту себе на компьютер в png формате (подгнанный размер).

### Сценарий 2 - Давно не виделись

- Пользователь заходит на сайт и уже имеет аккаунт.
- Вводит свою почту и пароль. Если пароль не попадает, или пользователя с такой почтой нет, получает соответствующее сообщение.
- Попадает на страницу со своими картами. Выбирает некоторую из них и нажимает кнопку "Open"
- Попадает на страницу редактирования карты. Пользуется инструментами из нижней панели.
- В левом верхнем выпадающем меню выбирает опцию "Save map". Может изменить название или оставить прежним. *(Карта сохраняется в бд)*
- Далее в том же меню выбирает "Get to my maps".
- Попадает на страницу со всеми картами.

### Отдельно про инструменты

Инструменты описаны слева направо.

- Скролл мыши приближает/отдаляет камеру *(область видимости в смысле)*.
- Рука - позволяет при зажатой кнопки мыши перетаскивать карту.
- Карандаш - позволяет рисовать тайлы на карте *(выбор тайловой системы обусловлен тем, что в DnD подобных системах передвижение это отдельное действие, которое измеряется в у.е., обычно футы. Тайлы интуитивно можно приравнять к футам.)*
- Выделение - позволяет выбрать сегмент карты (причем вместе с мебелью) и перенести его в другое место.
- Ластик - удаляет тайл/мебель. Если на тайле стоит предмет мебели, то ластик удалит именно его, а не тайл. При повторном использоватнии будет удален уже тайл.
- Мебель - открывает окно (всплывающее, не редирект) с ассетами мебели. На данный момент для демонстрации этого функционала доступно 8 объектов мебели. Любой приглянувшийся предмет можно выбрать и разместить на тайл на карте. Если после выбора мебели передумали, можно переключиться на другой инструмент, тогда постановка мебели сбросится. *(имею ввиду, что если не захотели ставить мебель после выбора, то не нужно ее ставить, а потом стирать, можно просто выбрать другой инструмент)*.

### Отдельно про страницу My maps

Если у пользователя нет ни одной карты, то будет висеть сообщение о том, что карт нет, но ее можно создать. Сверху есть кнопка "New map" - для создания новой карты, и "Refresh" - для обновления списка существующих карт.

Если у пользователя есть хотя бы одна карта, то выводится ее карточка *(ну или плашка, смотря как смотреть :-) )*. На плашке указана информация:

- Название карты
- Id в базе данных *(отладочная информация, т.к. MVP, на релизной версии уберу)*
- Версия карты *(т.е. если 3 раза сохраняли карту, то будет v3)*
- Дата последнего обновления (дата + время)

И есть кнопка "Open" - чтобы перейти к редактированию данной карты.

## Локальный запуск

### Требования:

- PostgreSQL (локально или через Docker - docker compose есть в репозитории backend'а)
- Spring Boot 4.0
- Java (JDK 21)
- Maven +3.8
- React +19 + TypeScript
- Node.js +18
- npm +8
- react-router-dom
- Redux Toolkit

### Инструкция:

- git clone https://github.com/Samyrai47/MapMakerBackend
- cd MapMakerBackend
- docker compose up -d
- mvn spring-boot:run

- git clone https://github.com/Samyrai47/MapMaker
- cd MapMaker
- npm install
- npm start
- Переходим по http://localhost:3000

## Про папки/маршруты:

### Организация кода:

- `src/app/` - hooks и store.
- `src/features/` - slice, createAsyncThunk.
- `src/api/` - запросы к бд по поводу карт.
- `src/pages/` - все страницы роутера.
- `src/assets` - иконки + мебель *(последнее думаю вынести в бд)*.

### Маршруты

- `/login` - вход в аккаунт.
- `/register` - регистрация нового аккаунта.
- `/maps` - карты пользователя.
- `/editor?mapId=x` - редактирование карты с id = x.
- `/editor` - редактирование новой карты.


### Примечание

- Тесты пока не успел реализовать
- Выбрал английский для сайта по двум причинам: более распространенный язык и только для него был шрифт который мне понравился)
